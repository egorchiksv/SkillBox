getent passwd - выведет содержание файла

clear очистит экран

su root - переключение на пользователя root
su Пользователь - переключение на указанного пользователя

Добавление пользователю прав суперпользователя необходимо:
1. Перейти в пользователя root: su root
2. Установить утилиту sudo: apt install sudo
3. Добавить пользователя в группу root: /sbin/adduser egor sudo

Если ввести команду sudo ls -l в пользователе с правами root (пользователь не root), то система попросит ввести пароль пользователя (пароль не root)

sudo swapon --show показать файл подкачки

Убить процесс sudo kill -9 pid процесса

Открытие еще одного окна командной строки прав Ctrl+F2, переход к предыдущему прав Ctrl+F1

cd - возвращает в предыдущую папку

ls -R покажет что все файлы и папке в домашней деректории

ls -l показывает файлы в длинном формате, в том числе покажет итого сколько занято блоков памяти

ls -a показывает все скрытые файлы и папки (все, что начинается с . является скрытым файлом, а все что подсвечено является скрытой директорией)

ls -al покажет все скрытые файлы и директории в длинном формает

ls -am выводит файлы и директории через запятую

ls -ax выводит файлы и директории в алфавитном формате

ls -s выводит информацию о занятых блоках

which mc покажет директорию, в которой установлено приложение

whereis mc покажет все директории, в которые программа установила свои файлы

ls /etc > etc.txt созадст файл в текущей директории и запишет в него содержание папки etc

ls -al >> etc.txt допишет содержание текущей директории в коней файла etc.txt

ls -al > etc.txt перезапишет файл etc.txt информацией о содержании текущей директории

mv test /home/egor/ перемещает файл test в директорию egor

mv test newtest переименует файл test в newtest

cp -R skillbox/ /home/egor/newdir/ скопирует директорию skillbox в newdir сохраняя всю структуру и содержание

ls -a /etc >bigfile запишем содержание директории etc в файл bigfile

ls - a /dev >>bigfile

more bigfile выведет содержание файла страницами

less bigfile выведет содержание файла страницами с функциями поиска в файле

head bigfile выводит 10 первых строй из файла

head -50 bigfile выводит 50 первых строк из файла

tail -20 bigfile выводит последние 20 строк из файла

split -b5k bigfile big. разбивка файла bigfile размерами по 5 кб с названием big.aa, big.ab, big.ac и т.д.

cat big.* >restoredbigfile соединит все файлы big.* с названием big в файл restoredbigfile

diff bigfile restoredbigfile сравнивает 2 файла

find выводит все, что находится в папке

find ./skillbox/ выводит содержание директории skillbox

find . -name 'big*' выведет файлы с именем начинающейся с big

find . -not -name 'big*' выведет файлы с именем не содержащих big

find . -maxdepth 1 -name '*.a*' выведет файлы с содержанием буквы а в расширении файла только в текущей директории

find ./skillbox/ ./newdir/ -type f -name 'err' выведет из папок skillbox и newdir все файлы с именем err

grep Egor /etc/passwd будет искать слово Egor в файле passwd

grep -i "Egor" /etc/passwd будет искать слово Egor в файле passwd не учитывая регистр

grep -v egor /etc/passwd будет искать в файле passwd все кроме egor

grep -r err /home/egor найдет все файлы, в которых есть err в содержании (не в имени файла)

grep -r -с err /home/egor найдет и выведет все файлы, в которых есть err в содержании и с количеством повторений

grep --color root /etc/passwd выведет и подсветит слово root из файла passwd

ls -a /etc | grep host выведет все файлы из etc в названия которых есть host

egrep -w "bin|bash" bigfile выведет файлы с названием bin или bash

grep -i sh bigfile | wc -l выведет количество повторений слова sh в файле bigfile

ls -l /dev/tty[0-23] выведет список устройств с номерами от 0 до 23

who am i выведет информацию о номере консоли, в которой сейчас рабатаю

echo "Hello!" > /dev/tty1 выведет сообщение Hello! в консоль tty1

cat /etc/hosts >/dev/tty2 выведет содержание файла hosts в консоль tty2

dd позваляет читать заданное число блоков из файла

od вывод дампа файла в разных форматах

dd if=/dev/zero bs=512 count=500 | od -c выведет из файла zero размером 512 байт с количеством 500 в структурированной формате с помощью команды od -c

df -h покажет информацию о дисках

lsblk покажет подробную информацию о дисках в виде дерева

ls -l /dev/ | grep sda выводит информацию о дисках (количество дисков и права доступа для них)

sudo fdisk -l запустить утилиту fdisk можно с помощью команды

df -T выведет все диски подмонтированные в системе

sudo apt install parted установка утилиты для работы с дисками

sudo parted /dev/sdb запуск утилиту parted для диска sdb (для флэшки usb)

В утилите parted: команда print выведет информацию о флэшке

В утилите parted: mklabel msdos создаст метку msdos для флэшки. Т.к. поменяли метку флэшки, информации о размере диски не будет отображаться

В утилите parted: mkpart создаем раздел. Необходимо указать тип раздела. Необходим указать начало форматирвоания 0% и конец форматирование -1s.

В утилите parted: quit выход из утилиты.

sudo mkfs.ext4 /dev/sdb1 форматирование раздела в системе ext4

sudo mount /dev/sdb1 /mnt примонтируем флешку в системе

sudo umount /dev/sdb1 отмонтируем флешку

sudo badblocks -v /dev/sdb1 >bad.txt выводит в файл bad.txt информацию о битых секоторах флешки с подробным описанием (наличие -v)

sudo e2fscl -l bad.txt /dev/sdb1 после команды badbloks необходимо системе сообщить, чтобы битые сектора записанные в bad.txt не нужно использовать для записи. Параметр -l говорит утилите, чтобы она использовала список битых секторов из файла.

sudo apt install smartmontools установка утилиты для проверки дисков

sudo smartctl -H /dev/sdb1 запуск диагностики диска

sudo fsck -M -c -y /dev/sdb1 запускаем утилиту диагностики (-M исключить из проверки диски, которые смонтированы в системе; -с чтобы увитедеть детали проверки; -y чтобы сразу исправлялись ошибки)

lesson 7
sudo apt install sleuthkit установка утилиты для анализа данных

sudo fsstat /dev/sda1 |more выведем информацию о блоках нашего диска

sudo fsstat /dev/mapper/skillbox--vg-root |more 

ls -li bad.txt выведет информацию о inode принадлижащих файлу bad.txt. Покажет номер индексного дискриптера.

stat bad.txt выведет подробную информацию о файле

sudo apt insrall ext4magic установим пакет для восстановления данных

Можно одновременно копировать несколько файлов sudo cp test10 test20 /mnt

sudo init 3 перед восстановлением файлов выполним команду. Переход в режим 3, т.е. режим без оболочки. Т.к. чаще всего графические оболочки обращаются к диску и вносят изменения

sudo /sbin/debugfs -R "dump <8> /home/egor/sdb1.journal" /dev/sdb1 делаем копию журнала файловой системы

date -d "-10minutes" +%s посмотреть метку времени 1751917375

sudo ext4magic /dev/sdb1 -H -a 1751917375 |more

Метка времени помечается *******. Нужно брать предыдущую метку времени 1751917736

sudo ext4msgic /dev/sdb1 -a 1751917736 -f / -l выведет на сколько пострадали файлы при удалении. Если имена файлов не выводит, занчит связь с ними потеряна.

sudo ext4magic /dev/sdb1 -a 1751917736 -f / -j sdb1.journal -r восстановление удаленный файлов по метке времени из журнала


sudo cat RECOVEREDIR/test10 попробудем найти удаленные файлы в папке RECOVEREDIR